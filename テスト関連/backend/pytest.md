# pytest周りの整理

## 理解
- @pytest.fixtureを使用することで、テストの前処理を記述できる。
    - 複数の引数を渡したい場合は、params=[]に記述する。
    - fixtureにはスコープが存在する。

        | スコープ名 | 粒度 |
        | ---- | ---- |
        | function | テストケース |
        | class  | テストクラス |
        | module  | テストファイル |
        | class  | テスト全体 |

- ユーザなど複数のテストから呼び出す処理は「conftest.py」に記述をする。
    <br>※「conftest.py」は同階層と親階層を利用できる。

- @pytest.mark.parametrizeを使用すると、同じテストを複数のパラメータで簡単に行える。

- mocker.patchを使用することで、メソッドや外部API接続をmock化できる。

- プロジェクト内に複数のappが存在する場合、デフォルトでtest.pyがappごとに配置される。<br>とすると、testsフォルダもapp毎に作成していくのが良さそう。




## 疑問
- mock, patch周りの違いは？
- テストDBを作成する際、マスタデータの入れ方は？
- 実装した関数だけでなく、datetime.now()などの標準モジュール等の置き換えは可能？
- 事前データとして複数テーブルを作成する場合、同じfixtureとしてまとめるか、それぞれ分けるか？
- fixturesにてbulk_createでデータを作った時、その元となったリストをテストケースで使い回せるか？また、それは一般的か？