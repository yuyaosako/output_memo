# API関連の整理

## 理解
- APIを外部公開する予定がなくても、RESTful APIを構築することは以下のメリットがある。
    1. 

- モバイルアプリやwebサイトなど、1つの実装で複数のコンシューマから利用することが可能。
- APIは組み合わせて色々と使えるからこそ、新規参画者や外部公開した時に使用しやすいような設計をすることが必要。
- APIは何ができるのかが分かればよく、その中身に関しては利用者には関係ない。
- API設計する際、コンシューマ(利用するユーザとソフトウェア)の視点に焦点を合わせることが礎となる。
- API設計時に考慮するポイント
    - 誰が使えるのか？
    - 何ができるのか？
    - それをどのように行うのか？
    - そのために何が必要か？
    - 何が返されるのか？
- APIの内容がデータ構造とほぼイコールになっていたらプロバイダ視点に立っている可能性が高いので再考が必要。
- プロバイダ視点での設計出の弊害は、コンシューマとは無関係な部分をAPIが曝け出すことに関連している。
- REST APIではメインリソースに結び付く動詞に注目する。<br>商品をカタログに追加する。の場合、カタログの追加アクションで、商品はパラメータ。
- 同じリソースを返すAPIだとしても、戻り値として必要最低限のデータのみ渡すため、その中身のデータまでが必ず一緒とは限らない。
- 実装をRESTに準拠させるのが難しい場合は、アクションリソースを使用したりする選択肢もあるが、いずれもコンシューマ視点を忘れない。
- RESTfulに保つためには以下の6点に注意すべき。
    1. クライアントとサーバーの分離
    2. ステートレス性
        - requestの実行に必要な全ての情報がrequest自体に含まれてなければならない。
    3. キャッシュ可能性
    4. 階層化システム
        - クライアントからは1つの層が見えるのみとする。（裏にあるストラクチャは気にしない）
    5. コードオンデマンド
    6. 統一インターフェース
        - 全てのやり取りを識別されたリソースに従って行う。(一意なパスと標準化されたHTTPメソッドを使用など) 
        - メタデータも全て提供する。
    
## 疑問
- APIの粒度は？
- コードオンデマンドとは？