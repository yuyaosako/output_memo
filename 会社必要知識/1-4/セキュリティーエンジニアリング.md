# セキュリティエンジニアリング

## 概要
- 目的
    - システムにおけるセキュリティの脆弱性を特定し、それに対処することでシステムを安全に保つこと。
- 構成要素
    - セキュリティアーキテクチャ
    - 脅威モデリング
    - セキュアコーディング
    - 脆弱性評価と診断
    - セキュリティモニタリング
- 脆弱性
    - OSやSW、HWにおいて情報の安全性を脅かす恐れのある欠陥を指す。
    - 例として以下などが挙げられる。
        1. SQLインジェクション
            - 不正なSQLを埋め込むことで、DBへの不正アクセスを可能にすること。
        2. クロスサイト・スクリプティング(XSS)
            - 悪意のあるスクリプトをWebページに挿入し、ユーザのブラウザで実行させること。
        3. セッションハイジャック
            - 有効なセッションIDを盗んで、不正アクセスをすること。
        4. クロスサイトリクエストフォージェリ(CSRF)
            - 不正なリクエストを行わせ、権限のある操作を実行させること。
        5. OS コマンド・インジェクション
            - ユーザーからの入力が不十分に検証・エスケープされ、そのままOSコマンドとして実行される
        6. ディレクトリ・トラバーサル
            - 許可されていないディレクトリへのアクセスを意図的に行うこと。
        7. クリックジャッキング
            - 透明な要素などを利用して、ユーザに不正なクリック操作等を実行させる方法

## セキュリティアーキテクチャ(設計・開発フェーズ)
- セキュリティの原則やベストプラクティスに基づいたアーキテクチャを構築すること。

- 考慮すべきポイントとして以下などがある。
    - アクセス制御
    - 認証・認可
    - 暗号化
    - 通信関連

- 実施すべき特性
    - 参考資料
        - https://www.ipa.go.jp/security/jisec/about/knowledge/cdk3vs000000230d-att/SecurityArchitectureGuide.pdf


## 脅威モデリング(設計・開発初期フェーズ)
- 潜在的な脅威や攻撃手法の予測・対応検討を設計段階でしておくことで脆弱性を最小限に抑える。

- 具体的な実施内容としては以下などがある。
    - 驚異の特定
    - 攻撃手法のモデリング

- 潜在的な脅威や攻撃手法に焦点を当てて、対策を見つけるところがセキュリティアーキテクチャとは違う。


## セキュアコーディング(実装フェーズ)
- セキュリティを強化するためのプラクティスやガイドラインに基づいた実装をすること。

- 実装時に意識すべきことについては以下などがある。
    1. バリデーションを実装する
    2. コンパイラの警告を確認する
    3. セキュリティポリシーを実装する
        - 個人情報の取り扱いなど、企業のセキュリティ対策の指針となるポリシーを指す。
    4. 設計はシンプルに行う
        - シンプルな設計の方がセキュリティー問題を発見しやすくなる。
    5. デフォルトで拒否する(フェイルセーフ)
        - 初期設定の時点でシステムのアクセスや操作を全員禁止にしておき、必要に応じて許可をしていく。
            - ホワイトリスト方式
    6. 最小権限の原則を守る
        - 目的に必要な最低限の機能しか与えないようにする。
    7. 送信データはサニタイズする
        - サニタイズ：「&」などの特殊文字を一般的な文字に変換すること。
        - SQLコマンドやシェルコマンドなどの入力は基本的には拒否できる。
    8. 多層防御を実装する
        - 入口・内部・出口の3階層で防御し、それぞれ別の観点から対策を実装する　など。
    9. 品質保証技術を使用する
        - Fuzz テスト、侵入テスト、およびソースコードの監査など、効果的な品質保証テクニックをプログラムに組み込む。
    10. セキュアコーディング標準を採用する
    - 参考資料
        - https://wiki.sei.cmu.edu/confluence/display/seccode/Top+10+Secure+Coding+Practices


## 脆弱性評価と診断(実装後、リリース前 or 定常的に)
- アプリケーションに潜む具体的な脆弱性の顕在化及び、対策を行うこと。
- 新規システムのリリース前や既存システムの運用段階で行われる。
- 主な実施内容としてはペネトレーションテストがある。
    - 実際に起こりうるサイバー攻撃のシナリオに沿って疑似攻撃を実施する方法。
    - 乱打式ではなく、特定の脆弱性に絞って攻撃を試みる手法が主流。
    - OWASP ZAPの使用もこれに当てはまる。


## セキュリティモニタリング(運用フェーズ)
- 運用中のシステム・ネットワークをリアルタイムで監視することで、セキュリティインシデントを早期に検出し、素早く対応すること。<br>※セキュリティインシデント：セキュリティ上の脅威となる事象。

- 具体的な実施内容としては以下などがある。
    - ログ分析
    - 不審なアクセスの検知
    - 異常トラフィックの監視
    - セキュリティイベントの警告
    - 脆弱性スキャン
    - 侵入検知システム（IDS）の活用

- 基本的にはシステムの導入などによって行うため、手動でやることは少ない。
- 動的なアプローチでリアルタイムでのシステム異常検知、対応をするために導入する。