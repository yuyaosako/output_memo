# 障害管理

## 概要
- 障害管理とは、障害の原因を突き止め、再発しないよう対策を講じること。
- システム障害とは、システムが正常なサービス提供をできない状態になることを指す。
    - アプリケーションの不具合やインフラ周りの故障　など
- 障害発生時の解決フローは、以下の工程を完了するまで反復的に行う。
    - 把握(事象確認、影響調査)：問題が発生したことを認識し、その症状や影響を確認する。
    - 切り分け(原因調査)：障害の発生原因を特定し、範囲を絞り込む。
    - 解決(復旧対応)：原因が究明された問題に対して対応策を講じ、業務やサービスを継続できる状態にする。
        - 故障部分の修理や不具合解消はそのために行う手段でしかない。

## ①アプリケーション障害
- **<u>障害の把握</u>**
    - ログの確認
        - アプリケーションログやエラーメッセージを確認する。
    - 影響範囲の確認
        - ユーザーからの報告やモニタリングツールを使用して、問題の影響を把握します。
- **<u>切り分け</u>**
    - ログ分析
        - アプリケーションログや関連するログを調査し、エラーメッセージや警告を特定する。
    - トラフィック監視
        - ネットワークトラフィックやデータベースクエリの監視を行い、ボトルネックや異常な動作を確認する。
    - リソースモニタリング
        - サーバーのリソース（CPU、メモリ、ディスク）の使用状況を確認する。
- **<u>解決</u>**
    - バグ修正
    - パフォーマンス最適化
    - リソースの増強

## ②データベース障害
- **<u>障害の把握</u>**
    - ログの確認
        - DBエラーログ・システムエラーログを確認する。
    - 影響範囲の確認
        - DB全体に影響を与えているのか、特定のクエリやテーブルに関連しているのかを特定する。
- **<u>切り分け</u>**
    - パフォーマンスモニタリング
        - DBのモニタリングツールなどを使用して、ボトルネックや異常なパフォーマンスを特定する。
    - ハードウェア/ネットワークの確認
        - DBが動作しているハードウェアやネットワークの問題を確認する。
    - アプリケーションの確認
        - アプリケーションのトランザクション制御周りが原因となっていないか確認する。
- **<u>解決</u>**
    - DB再起動
    - データの復元
        - 過去に控えていたバックアップを読み込む、データパッチを当てる など
    - パフォーマンス最適化
        - インデックスの再構築、クエリの最適化　など

## ③ネットワーク障害
- **<u>障害の把握</u>**
    - ログの確認
        - ネットワーク機器やサーバーのログを確認する。
    - 影響範囲の特定
        - ユーザーからの報告やトラフィック分析を通じて、障害の範囲を特定する。
- **<u>切り分け</u>**
    - ハードウェアの確認
        - ネットワーク機器（ルータ、スイッチ、ファイアウォールなど）の状態を確認し、物理的な故障がないかどうかを検証する。
    - セグメント・デバイスの確認
        - ネットワークトポロジやインフラ構成図等を基に、特定のセグメントやデバイスが影響を受けているかどうかを判定する。
    - パフォーマンスモニタリング
        - ネットワークモニタリングツール等を使用して、ネットワークトラフィックやボトルネックを特定する。
- **<u>解決</u>**
    - ネットワーク設定の確認
        - ファイアウォールやセキュリティデバイスの設定確認及び、調整 など
    - ネットワーク機器の再起動
    - 故障したネットワークデバイスの交換や修理
    - 最新のパッチ適用やアップデート

## ④ハードウェア障害
- **<u>障害の把握</u>**
    - ログの確認
        - ハードウェアログやシステムログを確認する。
    - ツールの確認
        - ハードウェアモニタリングツールや故障予測技術やセンサー情報等を使用する。
    - 症状の特定
        - エラーメッセージ、異音、異常な動作 など
- **<u>切り分け</u>**
    - 部品の切り分け
        - CPU, メモリ、ストレージ、ネットワークなどの各部品を個別にテストして問題部品の特定を行う。
    - 外部機器の排除
        - 各種接続や外部機器の影響を取り除き、問題がハードウェア内部にあるか確認する。
    - ハードウェアコンポーネントの調査
        - リソースモニタリングやトラフィック分析を行い、障害が特定のハードウェアコンポーネントに制約されているか確認する。
- **<u>解決</u>**
    - 故障部品の交換、修理
    - フォームウェアやドライバの更新
    - サーバーやネットワーク機器の冷却確認


## ⑤JCL障害(ジョブ制御障害)
- **<u>障害の把握</u>**
    - ログの確認
        - システムログやジョブスケジューラのログを確認する。
    - ジョブの異常終了確認
        - ジョブログやジョブ実行中のエラーメッセージからジョブが異常終了したかを確認する。
        - ジョブスケジュールや実行状態を監視して、障害が発生した時刻を把握する。
- **<u>切り分け</u>**
    - ジョブのステップごとの確認
        - ジョブのどのステップで問題が発生しているか特定する。
    - データセットのアクセス権確認
        - ジョブがアクセスしようとするデータセットやファイルに必要な権限があるか確認する。
    - ジョブパラメータの確認
        - JCLのパラメータが正しく設定されているか確認する。
    - 環境変数やシステムリソースの確認
        - ジョブが必要とする環境変数やシステムリソース（メモリ、ディスクスペースなど）が適切に設定されているか確認する。
- **<u>解決</u>**
    - JCLの修正
    - ジョブの再実行